---
title: "Notebook 2: Part 2"
output: html_notebook
---

# Health Burden

In this first code section, load your data and any necessary libraries (`dplyr`, `tidyr`, `ggplot`, any others you like).
```{r, echo=F}
# Set up (install packages if you don't have them)
library(dplyr)
library(tidyr)
library(ggplot2)
library(plotly)
risk.data <- read.csv('./data/prepped/risk-data.csv', stringsAsFactors = FALSE) 
```

## Data Structure
To get a basic sense of your dataset, check the following:

- What is the size of the dataset (rows, columns)?
- How many countries are present in the dataset?
- What are the age-groups in the dataset?
- What are the variables (columns) present in the dataset?
- What is the data type of each variable?
- What are the summary statistics of each quantitative variable (_hint: `summary()`_)

```{r}
# Code goes here
```

## Univariate Analysis
To explore the distribution of each risk-column in a visual way, create a plot with multiple sub-plots where each sub-plot is a histogram of a risk-column. To do this in an `R` way, you should **reshape your data** using the `gather` function to combine the risks (which are currently each their own column) into two columns (one for the _name_ of the risk, and the other for the _value_ of the death rate of that risk). Then, you can use the `facet_wrap` method of the ggplot library.

- Note what you find surprising!


```{r}
# Reshape long using `gather`


# Make histograms, facet by age

```

## Univariate analysis (by age)
In this section, you should **write a function** to investigate how a given risk (column) varies by **age group**. More specifically, the function should create a set of histograms (one for each age-group) to show the distribution of death rates across countries for a given risk factor. Again, you should use the `facet_wrap` function to create the multi-plot layout.

```{r}
# Write your function here


# Create plot to demonstrate that it works

```
## Univariate analysis (by sex)
In this section, you should investigate how a given risk (column) varies by **sex**. To do this, **write a function** to create a single histogram with _overlapping distributions_ for men and women (for a given risk factor). 

Make sure to include a **docstring**. 

_Hint_: set the `fill` of your `ggplot()` aesthetic, and turn down the _alpha_ (opacity) to help reduce occlusion in the chart. 

```{r}
# Write your function here


# Create plot to demonstrate that it works

```

## Univariate analysis (by super_region)

### Data Prep
In this section, you should investigate how each risk (column) varies by **super_region**. In order to do this, you'll need to **convert death rates to deaths** by multiplying the death rate by the `pop` column. Then, aggregate the data using the **group by** function (grouping by `super_region`) to compute the total number of deaths. Then, you'll need to _convert back_ to death _rates_ by dividing each risk by the aggregated `pop` column.


```{r}
# Do your data prep here

          
``` 

### Visualization
Then, you should write **two functions** that visualize your **aggregated** dataset:

1. For a given **risk factor**, show a bar chart of the death rate in each **super region**.
2. For a given **super region**, show a bar chart of the death rate for each **risk**. (You may need to reshape for this one...).

_Hint_: You'll want to use `geom_col`, _not_ `geom_bar`. And `aes_string` may be helpful for specifying your aesthetic using a string. 
```{r}
# Write your function here

# Demonstrate your functions here

```
## Bivariate analysis
As a final step, create a **scatterplot matrix** of all of your risks to visually assess the correlation across death rates.

When you've finished this step, compile your code to an `html` document. 
```{r}
# Create your scatterplot matrix here
```
